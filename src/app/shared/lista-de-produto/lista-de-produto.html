<h2 class="section-title">Produtos Disponíveis</h2>

<div class="carousel-wrapper">

  <button class="carousel-btn" (click)="scrollLeft()">❮</button>

  <div class="carousel" #carouselContainer>
    <div class="products">

      @for (p of vitrine$ | async; track p.name) {

        @let variacao = getVariacao(p);

        <div class="product-card">

          <!-- DESCONTO -->
          @if (variacao.preco.desconto > 0) {
            <span class="discount-badge">
-{{
  (variacao.preco.desconto / variacao.preco.valor) * 100
  | number:'1.0-0'
}}%
            </span>
          }

          <!-- BOTÃO ADD -->
          <button class="add-btn" (click)="adicionar(variacao)">+</button>

          <!-- IMAGEM -->
          <img [src]="variacao.imagemUrl" alt="{{ p.name }}" />

          <!-- INFO -->
          <div class="info">
            <h3 class="product-name">{{ p.name }}</h3>

            @if (variacao.preco.desconto > 0) {
              <p class="old-price">
                {{ variacao.preco.valor | currency:'BRL' }}
              </p>
            }

            <p class="price">
              {{ variacao.preco.valorFinal | currency:'BRL' }}
            </p>
          </div>

          <!-- VARIAÇÕES -->
          <div class="variacoes">
            @for (v of p.variacoes; track v.id) {
              <button
                class="variacao-btn"
                [class.active]="v.id === variacao.id"
                (click)="selecionarVariacao(p, v.id)"
              >
                {{ v.variacao }}
              </button>
            }
          </div>

        </div>
      }

    </div>
  </div>

  <button class="carousel-btn" (click)="scrollRight()">❯</button>

</div>
