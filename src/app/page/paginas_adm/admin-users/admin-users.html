
<app-add-usuario></app-add-usuario>
<app-sidebar></app-sidebar>
<div class="admin-users-container">

  <div class="table-wrapper">
    <table class="user-table">
      <thead>
        <tr>
          <th>Login</th>
          <th>Role</th>
          <th>Ações</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let user of users" [class.editing]="editUserId === user.id">
          <td>
            <div class="user-info">
              <div class="user-avatar">{{ user.login.charAt(0).toUpperCase() }}</div>
              <span>{{ user.login }}</span>
            </div>
          </td>
          <td>
            <span class="role-badge" [class.admin]="user.role === 'ADMIN'">
              {{ user.role === 'ADMIN' ? 'Administrador' : 'Usuário' }}
            </span>
          </td>
          <td>
            <button class="btn-edit" (click)="editar(user)">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
              Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="users.length === 0" class="empty-state">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
        <circle cx="9" cy="7" r="4"></circle>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
      </svg>
      <p>Nenhum usuário cadastrado</p>
    </div>
  </div>

  <!-- Modal de Edição -->
  <div *ngIf="editUserId" class="modal-overlay" (click)="cancelar()">
    <div class="edit-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Editar Usuário</h3>
        <button class="btn-close" (click)="cancelar()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label for="edit-login">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            Login
          </label>
          <input
            id="edit-login"
            type="text"
            [(ngModel)]="editLogin"
            placeholder="Digite o login"
          />
        </div>

        <div class="form-group">
          <label for="edit-password">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Nova Senha (opcional)
          </label>
          <input
            id="edit-password"
            type="password"
            [(ngModel)]="editPassword"
            placeholder="Deixe em branco para não alterar"
          />
        </div>

        <div class="form-group">
          <label for="edit-role">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            Permissão
          </label>
          <select id="edit-role" [(ngModel)]="editRole">
            <option value="USER">Usuário</option>
            <option value="ADMIN">Administrador</option>
          </select>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" (click)="cancelar()">Cancelar</button>
        <button class="btn-save" (click)="salvar()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Salvar Alterações
        </button>
      </div>
    </div>
  </div>
</div>